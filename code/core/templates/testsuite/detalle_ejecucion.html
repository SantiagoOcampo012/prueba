{% extends "base.html" %}
{% load static %}

{% block title %}Ejecución {{ ejecucion.pk }} | DX-DEV-QA{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/testsuite/detalle.css' %}">
{% endblock %}

{% block content %}
<div class="container">
    <!-- Breadcrumb -->
    <nav class="breadcrumb-nav">
        <a href="{% url 'testsuite:lista_ejecuciones' %}">
            <i class="fas fa-play-circle"></i> Ejecuciones
        </a>
        <span>/</span>
        <span class="current">Ejecución #{{ ejecucion.pk }}</span>
    </nav>

    <!-- Header de la Ejecución -->
    <div class="detail-header">
        <div class="header-content">
            <div class="header-icon">
                <i class="fas fa-play-circle"></i>
            </div>
            <div>
                <h1>Ejecución #{{ ejecucion.pk }}</h1>
                <div class="badges-row">
                    <span class="badge badge-info">
                        <i class="fas fa-clipboard-list"></i> {{ ejecucion.caso_prueba.nombre }}
                    </span>
                    {% if ejecucion.resultado == "Exitoso" %}
                    <span class="badge badge-success">{{ ejecucion.resultado }}</span>
                    {% elif ejecucion.resultado == "Fallido" %}
                    <span class="badge badge-danger">{{ ejecucion.resultado }}</span>
                    {% else %}
                    <span class="badge badge-warning">{{ ejecucion.resultado }}</span>
                    {% endif %}
                </div>
            </div>
        </div>
        <div class="header-actions">
            <a href="{% url 'testsuite:editar_ejecucion' ejecucion.pk %}" class="btn-secondary">
                <i class="fas fa-edit"></i> Editar
            </a>
            <a href="{% url 'testsuite:eliminar_ejecucion' ejecucion.pk %}" class="btn-danger">
                <i class="fas fa-trash"></i> Eliminar
            </a>
        </div>
    </div>

    <!-- Información de la Ejecución -->
    <div class="info-section">
        <h3><i class="fas fa-info-circle"></i> Detalles de la Ejecución</h3>
        
        <div class="metadata">
            <div class="meta-item">
                <span class="meta-label">Caso de Prueba:</span>
                <span class="meta-value">{{ ejecucion.caso_prueba.nombre }}</span>
            </div>
            <div class="meta-item">
                <span class="meta-label">Ejecutado Por:</span>
                <span class="meta-value">
                    {% if ejecucion.ejecutado_por %}
                    {{ ejecucion.ejecutado_por.nick }}
                    {% else %}
                    N/A
                    {% endif %}
                </span>
            </div>
            <div class="meta-item">
                <span class="meta-label">Estado:</span>
                <span class="meta-value">
                    {% if ejecucion.estado %}{{ ejecucion.estado.nombre }}{% else %}N/A{% endif %}
                </span>
            </div>
            <div class="meta-item">
                <span class="meta-label">Resultado:</span>
                <span class="meta-value">{{ ejecucion.resultado }}</span>
            </div>
            <div class="meta-item">
                <span class="meta-label">Fecha de Ejecución:</span>
                <span class="meta-value">{{ ejecucion.creacion|date:"d/m/Y H:i" }}</span>
            </div>
        </div>
        
        {% if ejecucion.observaciones %}
        <h3><i class="fas fa-comment"></i> Observaciones</h3>
        <p>{{ ejecucion.observaciones }}</p>
        {% endif %}
    </div>
</div>
{% endblock %}
